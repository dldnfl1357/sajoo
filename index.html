<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”® ì‚¬ì£¼í¬ì¶˜ - AI ì‚¬ì£¼ ë¶„ì„ ì„œë¹„ìŠ¤</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .saju-pillar {
            border: 2px solid #4338ca;
            border-radius: 8px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        .element-bar {
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ì²œê°„ (Heavenly Stems)
        const heavenlyStems = [
            { char: 'ç”²', hangul: 'ê°‘', element: 'æœ¨' },
            { char: 'ä¹™', hangul: 'ì„', element: 'æœ¨' },
            { char: 'ä¸™', hangul: 'ë³‘', element: 'ç«' },
            { char: 'ä¸', hangul: 'ì •', element: 'ç«' },
            { char: 'æˆŠ', hangul: 'ë¬´', element: 'åœŸ' },
            { char: 'å·±', hangul: 'ê¸°', element: 'åœŸ' },
            { char: 'åºš', hangul: 'ê²½', element: 'é‡‘' },
            { char: 'è¾›', hangul: 'ì‹ ', element: 'é‡‘' },
            { char: 'å£¬', hangul: 'ì„', element: 'æ°´' },
            { char: 'ç™¸', hangul: 'ê³„', element: 'æ°´' }
        ];

        // ì§€ì§€ (Earthly Branches)
        const earthlyBranches = [
            { char: 'å­', hangul: 'ì', element: 'æ°´' },
            { char: 'ä¸‘', hangul: 'ì¶•', element: 'åœŸ' },
            { char: 'å¯…', hangul: 'ì¸', element: 'æœ¨' },
            { char: 'å¯', hangul: 'ë¬˜', element: 'æœ¨' },
            { char: 'è¾°', hangul: 'ì§„', element: 'åœŸ' },
            { char: 'å·³', hangul: 'ì‚¬', element: 'ç«' },
            { char: 'åˆ', hangul: 'ì˜¤', element: 'ç«' },
            { char: 'æœª', hangul: 'ë¯¸', element: 'åœŸ' },
            { char: 'ç”³', hangul: 'ì‹ ', element: 'é‡‘' },
            { char: 'é…‰', hangul: 'ìœ ', element: 'é‡‘' },
            { char: 'æˆŒ', hangul: 'ìˆ ', element: 'åœŸ' },
            { char: 'äº¥', hangul: 'í•´', element: 'æ°´' }
        ];

        // ì‚¬ì£¼ ê³„ì‚° í•¨ìˆ˜
        function calculateSaju(year, month, day, hour = 12) {
            // ê°„ë‹¨í•œ ì‚¬ì£¼ ê³„ì‚° ë¡œì§ (ì‹¤ì œë¡œëŠ” ë” ë³µì¡í•¨)
            const yearStem = heavenlyStems[(year - 4) % 10];
            const yearBranch = earthlyBranches[(year - 4) % 12];

            const monthStem = heavenlyStems[(year * 2 + month) % 10];
            const monthBranch = earthlyBranches[(month - 1) % 12];

            const dayStem = heavenlyStems[(year + month + day) % 10];
            const dayBranch = earthlyBranches[(month + day) % 12];

            const hourStem = heavenlyStems[(day + Math.floor(hour / 2)) % 10];
            const hourBranch = earthlyBranches[Math.floor(hour / 2) % 12];

            return {
                year: { stem: yearStem, branch: yearBranch },
                month: { stem: monthStem, branch: monthBranch },
                day: { stem: dayStem, branch: dayBranch },
                hour: { stem: hourStem, branch: hourBranch }
            };
        }

        // ì˜¤í–‰ ë¶„ì„ í•¨ìˆ˜
        function analyzeElements(saju) {
            const elements = { æœ¨: 0, ç«: 0, åœŸ: 0, é‡‘: 0, æ°´: 0 };

            Object.values(saju).forEach(pillar => {
                elements[pillar.stem.element]++;
                elements[pillar.branch.element]++;
            });

            const total = Object.values(elements).reduce((a, b) => a + b, 0);
            const percentages = {};
            Object.entries(elements).forEach(([element, count]) => {
                percentages[element] = Math.round((count / total) * 100);
            });

            return percentages;
        }

        // ì‚¬ì£¼ ì„¤ëª… ë°ì´í„°
        const sajuExplanations = {
            pillars: {
                year: { name: 'ë…„ì£¼', meaning: 'ì¡°ìƒê³¼ ë¶€ëª¨, ì„±ì¥í™˜ê²½ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤' },
                month: { name: 'ì›”ì£¼', meaning: 'ì²­ë…„ê¸°ì™€ ì§ì—…, ì‚¬íšŒìƒí™œì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤' },
                day: { name: 'ì¼ì£¼', meaning: 'ìì‹ ê³¼ ë°°ìš°ì, ì„±ê²©ì˜ í•µì‹¬ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤' },
                hour: { name: 'ì‹œì£¼', meaning: 'ë…¸ë…„ê³¼ ìë…€, ë§ë…„ìš´ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤' }
            },
            elements: {
                æœ¨: { name: 'ëª©(æœ¨)', meaning: 'ì„±ì¥ê³¼ ë°œì „, ì°½ì˜ë ¥ê³¼ ìœ ì—°ì„±ì„ ìƒì§•í•©ë‹ˆë‹¤' },
                ç«: { name: 'í™”(ç«)', meaning: 'ì—´ì •ê³¼ í™œë ¥, ë¦¬ë”ì‹­ê³¼ í‘œí˜„ë ¥ì„ ìƒì§•í•©ë‹ˆë‹¤' },
                åœŸ: { name: 'í† (åœŸ)', meaning: 'ì•ˆì •ê³¼ ì‹ ë¢°, í¬ìš©ë ¥ê³¼ í˜„ì‹¤ê°ì„ ìƒì§•í•©ë‹ˆë‹¤' },
                é‡‘: { name: 'ê¸ˆ(é‡‘)', meaning: 'ì •ì˜ì™€ ì›ì¹™, íŒë‹¨ë ¥ê³¼ ì˜ì§€ë ¥ì„ ìƒì§•í•©ë‹ˆë‹¤' },
                æ°´: { name: 'ìˆ˜(æ°´)', meaning: 'ì§€í˜œì™€ ì ì‘, í•™ìŠµëŠ¥ë ¥ê³¼ ì†Œí†µë ¥ì„ ìƒì§•í•©ë‹ˆë‹¤' }
            }
        };

        // ì—°ì˜ˆì¸ ë§¤ì¹­ ë°ì´í„°
        const celebrityMatching = {
            'ç”²': {
                name: 'ì†¡ì¤‘ê¸°',
                image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=ì†¡ì¤‘ê¸°&background=3b82f6&color=ffffff&size=150',
                reason: 'ì¹´ë¦¬ìŠ¤ë§ˆ ìˆëŠ” ë¦¬ë” íƒ€ì…'
            },
            'ä¹™': {
                name: 'ì•„ì´ìœ ',
                image: 'https://images.unsplash.com/photo-1494790108755-2616c30a5a0c?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=ì•„ì´ìœ &background=ec4899&color=ffffff&size=150',
                reason: 'ì„¬ì„¸í•˜ê³  ê°ì„±ì ì¸ íƒ€ì…'
            },
            'ä¸™': {
                name: 'ë°•ë³´ê²€',
                image: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=ë°•ë³´ê²€&background=f59e0b&color=ffffff&size=150',
                reason: 'ë°ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€'
            },
            'ä¸': {
                name: 'ë°•ì‹ í˜œ',
                image: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=ë°•ì‹ í˜œ&background=f97316&color=ffffff&size=150',
                reason: 'ë”°ëœ»í•˜ê³  ì •ì´ ë§ì€ íƒ€ì…'
            },
            'æˆŠ': {
                name: 'í˜„ë¹ˆ',
                image: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=í˜„ë¹ˆ&background=84cc16&color=ffffff&size=150',
                reason: 'ì•ˆì •ì ì´ê³  ì‹ ë¢°ê° ìˆëŠ” íƒ€ì…'
            },
            'å·±': {
                name: 'ì†ì˜ˆì§„',
                image: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=ì†ì˜ˆì§„&background=06b6d4&color=ffffff&size=150',
                reason: 'ì°¨ë¶„í•˜ê³  ìš°ì•„í•œ ë§¤ë ¥'
            },
            'åºš': {
                name: 'ì •ìš°ì„±',
                image: 'https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=ì •ìš°ì„±&background=8b5cf6&color=ffffff&size=150',
                reason: 'ì˜ì§€ê°€ ê°•í•˜ê³  ì •ì§í•œ íƒ€ì…'
            },
            'è¾›': {
                name: 'ê¹€íƒœí¬',
                image: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=ê¹€íƒœí¬&background=ef4444&color=ffffff&size=150',
                reason: 'ì„¸ë ¨ë˜ê³  í’ˆê²© ìˆëŠ” ë¯¸ì¸'
            },
            'å£¬': {
                name: 'ê³µìœ ',
                image: 'https://images.unsplash.com/photo-1507591064344-4c6ce005b128?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=ê³µìœ &background=10b981&color=ffffff&size=150',
                reason: 'ì§€ì ì´ê³  í†µì°°ë ¥ ìˆëŠ” íƒ€ì…'
            },
            'ç™¸': {
                name: 'ìˆ˜ì§€',
                image: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=150&h=150&fit=crop&crop=face',
                fallback: 'https://ui-avatars.com/api/?name=ìˆ˜ì§€&background=f472b6&color=ffffff&size=150',
                reason: 'ë¶€ë“œëŸ½ê³  ì¹œê·¼í•œ ë§¤ë ¥'
            }
        };

        // ë©”ì¸ ì»´í¬ë„ŒíŠ¸
        function SajuApp() {
            const [currentView, setCurrentView] = useState('input');
            const [formData, setFormData] = useState({
                name: '',
                year: '',
                month: '',
                day: '',
                hour: '12',
                minute: '0',
                calendar: 'solar',
                gender: '',
                timeUnknown: false
            });
            const [result, setResult] = useState(null);
            const [loading, setLoading] = useState(false);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!formData.year || !formData.month || !formData.day) {
                    alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                setLoading(true);

                setTimeout(() => {
                    const saju = calculateSaju(
                        parseInt(formData.year),
                        parseInt(formData.month),
                        parseInt(formData.day),
                        parseInt(formData.hour)
                    );

                    const elements = analyzeElements(saju);

                    const personality = generatePersonality(saju.day.stem);
                    const fortune = generateFortune();
                    const celebrity = celebrityMatching[saju.day.stem.char];

                    setResult({
                        saju,
                        elements,
                        personality,
                        fortune,
                        celebrity
                    });

                    setLoading(false);
                    setCurrentView('result');
                }, 2000);
            };

            const generatePersonality = (dayStem) => {
                const personalities = {
                    'ç”²': { trait: 'ì°½ì˜ì ì´ê³  ë¦¬ë”ì‹­ì´ ê°•í•œ', strength: 'ì§„ì·¨ì , ê°œì²™ì •ì‹ ', weakness: 'ê³ ì§‘ì´ ì„¸ê³  ì™„ê³ í•¨' },
                    'ä¹™': { trait: 'ì„¬ì„¸í•˜ê³  ë°°ë ¤ì‹¬ ê¹Šì€', strength: 'ì ì‘ë ¥, ì¡°í™”ë¡œì›€', weakness: 'ìš°ìœ ë¶€ë‹¨, ì˜ì¡´ì ' },
                    'ä¸™': { trait: 'ë°ê³  ì—´ì •ì ì¸', strength: 'ì‚¬êµì , ë‚™ì²œì ', weakness: 'ì„±ê¸‰í•¨, ì§‘ì¤‘ë ¥ ë¶€ì¡±' },
                    'ä¸': { trait: 'ë”°ëœ»í•˜ê³  ì •ì´ ë§ì€', strength: 'ë°°ë ¤ì‹¬, ì˜ˆìˆ ì  ê°ê°', weakness: 'ê°ì •ì , ë³€ë•ìŠ¤ëŸ¬ì›€' },
                    'æˆŠ': { trait: 'ì•ˆì •ì ì´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”', strength: 'ì±…ì„ê°, ëˆê¸°', weakness: 'ë³´ìˆ˜ì , ìœµí†µì„± ë¶€ì¡±' },
                    'å·±': { trait: 'ì°¨ë¶„í•˜ê³  ì‹ ì¤‘í•œ', strength: 'ë¶„ì„ë ¥, ê³„íšì„±', weakness: 'ì†Œê·¹ì , ê±±ì •ì´ ë§ìŒ' },
                    'åºš': { trait: 'ì •ì§í•˜ê³  ì˜ì§€ê°€ ê°•í•œ', strength: 'ê²°ë‹¨ë ¥, ì •ì˜ê°', weakness: 'ë”±ë”±í•¨, ìœµí†µì„± ë¶€ì¡±' },
                    'è¾›': { trait: 'ì„¸ë ¨ë˜ê³  í’ˆê²© ìˆëŠ”', strength: 'ë¯¸ì  ê°ê°, ì„¸ì‹¬í•¨', weakness: 'ê¹Œë‹¤ë¡œì›€, í˜„ì‹¤ë„í”¼' },
                    'å£¬': { trait: 'ì§€í˜œë¡­ê³  í†µì°°ë ¥ì´ ë›°ì–´ë‚œ', strength: 'í•™ìŠµëŠ¥ë ¥, ì ì‘ë ¥', weakness: 'ë³€ë•ìŠ¤ëŸ¬ì›€, ìš°ìœ ë¶€ë‹¨' },
                    'ç™¸': { trait: 'ë¶€ë“œëŸ½ê³  í¬ìš©ë ¥ ìˆëŠ”', strength: 'ê³µê°ëŠ¥ë ¥, í˜‘ë ¥', weakness: 'ì˜ì¡´ì , ì†Œê·¹ì ' }
                };

                return personalities[dayStem.char] || personalities['ç”²'];
            };

            const generateFortune = () => {
                return {
                    overall: 4,
                    money: 'ìƒë°˜ê¸°ì— ì¢‹ì€ ê¸°íšŒê°€ ìˆì„ ê²ƒì…ë‹ˆë‹¤',
                    love: 'ìƒˆë¡œìš´ ë§Œë‚¨ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤',
                    health: 'ê·œì¹™ì ì¸ ìƒí™œì´ í•„ìš”í•©ë‹ˆë‹¤',
                    career: 'ì¸ë‚´ì‹¬ì„ ê°€ì§€ê³  ê¾¸ì¤€íˆ ë…¸ë ¥í•˜ì„¸ìš”'
                };
            };

            if (loading) {
                return (
                    <div className="min-h-screen flex items-center justify-center">
                        <div className="text-center text-white">
                            <div className="animate-spin text-6xl mb-4">ğŸ”®</div>
                            <div className="text-2xl font-semibold">ìš´ëª…ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
                            <div className="text-lg mt-2 opacity-80">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</div>
                        </div>
                    </div>
                );
            }

            if (currentView === 'result' && result) {
                return <ResultView result={result} formData={formData} onRestart={() => setCurrentView('input')} />;
            }

            return <InputView formData={formData} setFormData={setFormData} onSubmit={handleSubmit} />;
        }

        // ì…ë ¥ í™”ë©´ ì»´í¬ë„ŒíŠ¸
        function InputView({ formData, setFormData, onSubmit }) {
            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
                        <div className="text-center mb-8">
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">ğŸ”® ì‚¬ì£¼í¬ì¶˜</h1>
                            <p className="text-gray-600">ë‹¹ì‹ ì˜ ìš´ëª…ì„ ì½ì–´ë“œë¦½ë‹ˆë‹¤</p>
                        </div>

                        <form onSubmit={onSubmit} className="space-y-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    ì´ë¦„ (ì„ íƒ)
                                </label>
                                <input
                                    type="text"
                                    value={formData.name}
                                    onChange={(e) => setFormData({...formData, name: e.target.value})}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                    placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    ìƒë…„ì›”ì¼ *
                                </label>
                                <div className="grid grid-cols-3 gap-2 mb-3">
                                    <input
                                        type="number"
                                        value={formData.year}
                                        onChange={(e) => setFormData({...formData, year: e.target.value})}
                                        className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                        placeholder="ë…„"
                                        min="1900"
                                        max="2025"
                                        required
                                    />
                                    <input
                                        type="number"
                                        value={formData.month}
                                        onChange={(e) => setFormData({...formData, month: e.target.value})}
                                        className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                        placeholder="ì›”"
                                        min="1"
                                        max="12"
                                        required
                                    />
                                    <input
                                        type="number"
                                        value={formData.day}
                                        onChange={(e) => setFormData({...formData, day: e.target.value})}
                                        className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                        placeholder="ì¼"
                                        min="1"
                                        max="31"
                                        required
                                    />
                                </div>
                                <div className="flex space-x-4">
                                    <label className="flex items-center">
                                        <input
                                            type="radio"
                                            value="solar"
                                            checked={formData.calendar === 'solar'}
                                            onChange={(e) => setFormData({...formData, calendar: e.target.value})}
                                            className="mr-2"
                                        />
                                        ì–‘ë ¥
                                    </label>
                                    <label className="flex items-center">
                                        <input
                                            type="radio"
                                            value="lunar"
                                            checked={formData.calendar === 'lunar'}
                                            onChange={(e) => setFormData({...formData, calendar: e.target.value})}
                                            className="mr-2"
                                        />
                                        ìŒë ¥
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    íƒœì–´ë‚œ ì‹œê°„ (ì„ íƒ)
                                </label>
                                <div className="grid grid-cols-2 gap-2 mb-3">
                                    <input
                                        type="number"
                                        value={formData.hour}
                                        onChange={(e) => setFormData({...formData, hour: e.target.value})}
                                        className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                        placeholder="ì‹œ"
                                        min="0"
                                        max="23"
                                        disabled={formData.timeUnknown}
                                    />
                                    <input
                                        type="number"
                                        value={formData.minute}
                                        onChange={(e) => setFormData({...formData, minute: e.target.value})}
                                        className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                        placeholder="ë¶„"
                                        min="0"
                                        max="59"
                                        disabled={formData.timeUnknown}
                                    />
                                </div>
                                <label className="flex items-center">
                                    <input
                                        type="checkbox"
                                        checked={formData.timeUnknown}
                                        onChange={(e) => setFormData({...formData, timeUnknown: e.target.checked})}
                                        className="mr-2"
                                    />
                                    ëª¨ë¥´ê² ì–´ìš”
                                </label>
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    ì„±ë³„ (ì„ íƒ)
                                </label>
                                <div className="flex space-x-4">
                                    <label className="flex items-center">
                                        <input
                                            type="radio"
                                            value="male"
                                            checked={formData.gender === 'male'}
                                            onChange={(e) => setFormData({...formData, gender: e.target.value})}
                                            className="mr-2"
                                        />
                                        ë‚¨ì„±
                                    </label>
                                    <label className="flex items-center">
                                        <input
                                            type="radio"
                                            value="female"
                                            checked={formData.gender === 'female'}
                                            onChange={(e) => setFormData({...formData, gender: e.target.value})}
                                            className="mr-2"
                                        />
                                        ì—¬ì„±
                                    </label>
                                    <label className="flex items-center">
                                        <input
                                            type="radio"
                                            value=""
                                            checked={formData.gender === ''}
                                            onChange={(e) => setFormData({...formData, gender: e.target.value})}
                                            className="mr-2"
                                        />
                                        ì„ íƒì•ˆí•¨
                                    </label>
                                </div>
                            </div>

                            <button
                                type="submit"
                                className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-lg font-semibold text-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 transform hover:scale-105"
                            >
                                ğŸ”® ì‚¬ì£¼ ë³´ê¸°
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        // ê²°ê³¼ í™”ë©´ ì»´í¬ë„ŒíŠ¸
        function ResultView({ result, formData, onRestart }) {
            const elementNames = {
                'æœ¨': { name: 'ëª©', color: 'bg-green-500' },
                'ç«': { name: 'í™”', color: 'bg-red-500' },
                'åœŸ': { name: 'í† ', color: 'bg-yellow-600' },
                'é‡‘': { name: 'ê¸ˆ', color: 'bg-gray-400' },
                'æ°´': { name: 'ìˆ˜', color: 'bg-blue-500' }
            };

            const handleShare = () => {
                // ì‚¬ì£¼íŒ”ì í…ìŠ¤íŠ¸ ìƒì„±
                const sajuText = Object.entries(result.saju).map(([pillar, data], index) => {
                    const pillarNames = ['ë…„ì£¼', 'ì›”ì£¼', 'ì¼ì£¼', 'ì‹œì£¼'];
                    return `${pillarNames[index]}: ${data.stem.char}(${data.stem.hangul}) ${data.branch.char}(${data.branch.hangul})`;
                }).join('\n');

                // ì˜¤í–‰ ë¶„ì„ í…ìŠ¤íŠ¸ ìƒì„±
                const elementsText = Object.entries(result.elements)
                    .map(([element, percentage]) => {
                        const elementNames = { æœ¨: 'ëª©', ç«: 'í™”', åœŸ: 'í† ', é‡‘: 'ê¸ˆ', æ°´: 'ìˆ˜' };
                        return `${elementNames[element]}: ${percentage}%`;
                    })
                    .join(', ');

                const shareText = `ğŸ”® ${formData.name || 'ë‚˜'}ì˜ ì‚¬ì£¼ ë¶„ì„ ê²°ê³¼

ğŸ“œ ì‚¬ì£¼íŒ”ì:
${sajuText}

â¬¢ ì˜¤í–‰ ë°¸ëŸ°ìŠ¤: ${elementsText}

ğŸ’« ì„±ê²©: ${result.personality.trait}
ì¥ì : ${result.personality.strength}
ì£¼ì˜ì : ${result.personality.weakness}

ğŸ“… 2025ë…„ ìš´ì„¸ ${'â˜…'.repeat(result.fortune.overall)}${'â˜†'.repeat(5-result.fortune.overall)}
ğŸ’° ì¬ë¬¼ìš´: ${result.fortune.money}
ğŸ’• ì• ì •ìš´: ${result.fortune.love} (${result.celebrity.name}ì™€ ì–´ìš¸ë¦¼)
ğŸ’ª ê±´ê°•ìš´: ${result.fortune.health}
ğŸ‘” ì§ì¥ìš´: ${result.fortune.career}

ğŸ”— ì‚¬ì£¼í¬ì¶˜ì—ì„œ ë‚˜ë„ í•´ë³´ê¸°: https://dldnfl1357.github.io/sajoo`;

                // ì¹´ì¹´ì˜¤í†¡ í˜¸í™˜ì„±ì„ ìœ„í•´ ì§ì ‘ í´ë¦½ë³´ë“œ ë³µì‚¬
                const copyToClipboard = () => {
                    if (navigator.clipboard && window.isSecureContext) {
                        // ëª¨ë˜ ë¸Œë¼ìš°ì €ì˜ Clipboard API
                        navigator.clipboard.writeText(shareText).then(() => {
                            showShareSuccess();
                        }).catch(() => {
                            fallbackCopy();
                        });
                    } else {
                        fallbackCopy();
                    }
                };

                const fallbackCopy = () => {
                    try {
                        const textarea = document.createElement('textarea');
                        textarea.value = shareText;
                        textarea.style.position = 'fixed';
                        textarea.style.left = '-999999px';
                        textarea.style.top = '-999999px';
                        document.body.appendChild(textarea);
                        textarea.focus();
                        textarea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textarea);
                        showShareSuccess();
                    } catch (err) {
                        alert('ê³µìœ  ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\nê²°ê³¼ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
                    }
                };

                const showShareSuccess = () => {
                    alert('âœ… ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nğŸ“± ì¹´ì¹´ì˜¤í†¡ì„ ì—´ê³  ë¶™ì—¬ë„£ê¸°(Ctrl+V) í•˜ì„¸ìš”.\n\nğŸ’¡ íŒ: ì±„íŒ…ë°©ì—ì„œ ê¸¸ê²Œ ëˆŒëŸ¬ì„œ "ë¶™ì—¬ë„£ê¸°"ë¥¼ ì„ íƒí•˜ì„¸ìš”.');
                };

                // ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ Web Share API ì‹œë„, ì‹¤íŒ¨í•˜ë©´ í´ë¦½ë³´ë“œ ë³µì‚¬
                if (navigator.share && /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                    navigator.share({
                        title: 'ğŸ”® ì‚¬ì£¼í¬ì¶˜ ê²°ê³¼',
                        text: shareText
                    }).catch(() => {
                        // Web Share API ì‹¤íŒ¨ ì‹œ í´ë¦½ë³´ë“œ ë³µì‚¬ë¡œ ëŒ€ì²´
                        copyToClipboard();
                    });
                } else {
                    // ë°ìŠ¤í¬í†±ì´ë‚˜ Web Share API ë¯¸ì§€ì› í™˜ê²½ì—ì„œëŠ” ë°”ë¡œ í´ë¦½ë³´ë“œ ë³µì‚¬
                    copyToClipboard();
                }
            };

            return (
                <div className="min-h-screen p-4">
                    <div className="max-w-2xl mx-auto">
                        <div className="bg-white rounded-2xl shadow-2xl overflow-hidden">
                            {/* í—¤ë” */}
                            <div className="bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 text-center">
                                <h1 className="text-2xl font-bold">
                                    {formData.name ? `${formData.name}ë‹˜ì˜` : 'ë‹¹ì‹ ì˜'} ì‚¬ì£¼íŒ”ì
                                </h1>
                                <p className="opacity-90">
                                    {formData.year}ë…„ {formData.month}ì›” {formData.day}ì¼ ìƒ
                                </p>
                            </div>

                            {/* ì‚¬ì£¼íŒ”ì */}
                            <div className="p-6">
                                <h2 className="text-xl font-bold mb-4 text-center">ğŸ“œ ì‚¬ì£¼íŒ”ì</h2>
                                <div className="grid grid-cols-4 gap-4 mb-6">
                                    {Object.entries(result.saju).map(([pillar, data], index) => {
                                        const pillarKey = ['year', 'month', 'day', 'hour'][index];
                                        const explanation = sajuExplanations.pillars[pillarKey];
                                        return (
                                            <div key={pillar} className="saju-pillar p-3 text-center group relative">
                                                <div className="text-xs text-gray-600 mb-1">
                                                    {explanation.name}
                                                </div>
                                                <div className="text-2xl font-bold text-indigo-800 mb-1">
                                                    {data.stem.char}
                                                </div>
                                                <div className="text-sm text-gray-700 mb-2">
                                                    {data.stem.hangul}
                                                </div>
                                                <div className="border-t pt-2">
                                                    <div className="text-2xl font-bold text-indigo-800 mb-1">
                                                        {data.branch.char}
                                                    </div>
                                                    <div className="text-sm text-gray-700">
                                                        {data.branch.hangul}
                                                    </div>
                                                </div>
                                                <div className="absolute bottom-full left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none mb-2 whitespace-nowrap">
                                                    {explanation.meaning}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>

                                {/* ì‚¬ì£¼ ì„¤ëª… */}
                                <div className="bg-blue-50 rounded-lg p-4 mb-8">
                                    <h3 className="font-semibold text-blue-800 mb-2">ğŸ“– ì‚¬ì£¼íŒ”ìë€?</h3>
                                    <p className="text-sm text-blue-700">
                                        íƒœì–´ë‚œ ì—°ì›”ì¼ì‹œë¥¼ ì²œê°„ê³¼ ì§€ì§€ë¡œ í‘œí˜„í•œ ê²ƒìœ¼ë¡œ, ê° ê¸°ë‘¥(ì£¼)ì€ ì¸ìƒì˜ ë‹¤ë¥¸ ì‹œê¸°ì™€ ì˜ì—­ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
                                        ê° ê¸°ë‘¥ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìì„¸í•œ ì„¤ëª…ì„ ë³¼ ìˆ˜ ìˆì–´ìš”!
                                    </p>
                                </div>

                                {/* ì˜¤í–‰ ë¶„ì„ */}
                                <h2 className="text-xl font-bold mb-4">â¬¢ ì˜¤í–‰ ë°¸ëŸ°ìŠ¤</h2>
                                <div className="space-y-3 mb-6">
                                    {Object.entries(result.elements).map(([element, percentage]) => (
                                        <div key={element} className="flex items-center group">
                                            <div className="w-8 text-sm font-medium">
                                                {elementNames[element].name}
                                            </div>
                                            <div className="flex-1 mx-3 bg-gray-200 rounded-full h-6 overflow-hidden relative">
                                                <div
                                                    className={`element-bar h-full ${elementNames[element].color}`}
                                                    style={{width: `${percentage}%`}}
                                                ></div>
                                                <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                                                    <div className="bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap">
                                                        {sajuExplanations.elements[element].meaning}
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="w-12 text-sm font-medium">
                                                {percentage}%
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                {/* ì˜¤í–‰ ì„¤ëª… */}
                                <div className="bg-green-50 rounded-lg p-4 mb-8">
                                    <h3 className="font-semibold text-green-800 mb-2">ğŸŒ¿ ì˜¤í–‰ì´ë€?</h3>
                                    <p className="text-sm text-green-700">
                                        ëª©(æœ¨), í™”(ç«), í† (åœŸ), ê¸ˆ(é‡‘), ìˆ˜(æ°´) ë‹¤ì„¯ ê°€ì§€ ê¸°ìš´ìœ¼ë¡œ ì„¸ìƒì˜ ëª¨ë“  ê²ƒì„ ì„¤ëª…í•˜ëŠ” ì´ë¡ ì…ë‹ˆë‹¤.
                                        ê° ì˜¤í–‰ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ì˜ë¯¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”!
                                    </p>
                                </div>

                                {/* ì„±ê²© ë¶„ì„ */}
                                <h2 className="text-xl font-bold mb-4">ğŸ’« íƒ€ê³ ë‚œ ì„±ê²©</h2>
                                <div className="bg-gray-50 rounded-lg p-4 mb-8">
                                    <p className="text-lg font-medium text-gray-800 mb-3">
                                        "{result.personality.trait}"
                                    </p>
                                    <div className="grid grid-cols-2 gap-4 text-sm">
                                        <div>
                                            <span className="font-medium text-green-600">ì¥ì :</span>
                                            <span className="ml-2">{result.personality.strength}</span>
                                        </div>
                                        <div>
                                            <span className="font-medium text-orange-600">ì£¼ì˜ì :</span>
                                            <span className="ml-2">{result.personality.weakness}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* 2025ë…„ ìš´ì„¸ */}
                                <h2 className="text-xl font-bold mb-4">ğŸ“… 2025ë…„ ìš´ì„¸</h2>
                                <div className="bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 mb-8">
                                    <div className="text-center mb-4">
                                        <div className="text-2xl mb-2">
                                            {'â˜…'.repeat(result.fortune.overall)}{'â˜†'.repeat(5-result.fortune.overall)}
                                        </div>
                                        <div className="font-semibold text-gray-800">ì¢…í•©ìš´ì„¸</div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4 text-sm mb-4">
                                        <div>ğŸ’° <span className="font-medium">ì¬ë¬¼ìš´:</span> {result.fortune.money}</div>
                                        <div>ğŸ’ª <span className="font-medium">ê±´ê°•ìš´:</span> {result.fortune.health}</div>
                                        <div>ğŸ‘” <span className="font-medium">ì§ì¥ìš´:</span> {result.fortune.career}</div>
                                    </div>

                                    {/* ì• ì •ìš´ - ì—°ì˜ˆì¸ ë§¤ì¹­ */}
                                    <div className="bg-pink-50 rounded-lg p-4">
                                        <div className="flex items-center justify-between mb-3">
                                            <span className="font-medium">ğŸ’• ì• ì •ìš´:</span>
                                            <span className="text-sm text-pink-600">ë‹¹ì‹ ê³¼ ì–´ìš¸ë¦¬ëŠ” ì—°ì˜ˆì¸</span>
                                        </div>
                                        <div className="flex items-center space-x-4">
                                            <img
                                                src={result.celebrity.image}
                                                alt={result.celebrity.name}
                                                className="w-16 h-16 rounded-full object-cover border-2 border-pink-200"
                                                onError={(e) => {
                                                    e.target.src = result.celebrity.fallback;
                                                }}
                                            />
                                            <div className="flex-1">
                                                <div className="font-semibold text-pink-800">{result.celebrity.name}</div>
                                                <div className="text-sm text-pink-600">{result.celebrity.reason}</div>
                                                <div className="text-xs text-pink-500 mt-1">{result.fortune.love}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* ì‚¬ì£¼ ì „ë¬¸ê°€ ë§¤ì¹­ í”Œë«í¼ */}
                                <div className="bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-6 mb-8 border border-amber-200">
                                    <div className="text-center mb-4">
                                        <h3 className="text-lg font-bold text-amber-800 mb-2">ğŸ”® ì „ë¬¸ê°€ ìƒë‹´ ë°›ê¸°</h3>
                                        <p className="text-sm text-amber-700">
                                            ë” ì •í™•í•˜ê³  ìì„¸í•œ ì‚¬ì£¼ í•´ì„ì„ ì›í•˜ì‹œë‚˜ìš”?<br/>
                                            ê²€ì¦ëœ ì‚¬ì£¼ ì „ë¬¸ê°€ë“¤ê³¼ 1:1 ìƒë‹´ì„ ë°›ì•„ë³´ì„¸ìš”!
                                        </p>
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                        <div className="text-center p-4 bg-white rounded-lg shadow-sm">
                                            <div className="text-2xl mb-2">ğŸ‘¨â€ğŸ«</div>
                                            <div className="font-semibold text-gray-800 text-sm">ê²½ë ¥ 10ë…„+</div>
                                            <div className="text-xs text-gray-600">ì „ë¬¸ê°€ 50ëª…</div>
                                        </div>
                                        <div className="text-center p-4 bg-white rounded-lg shadow-sm">
                                            <div className="text-2xl mb-2">ğŸ’¬</div>
                                            <div className="font-semibold text-gray-800 text-sm">ì‹¤ì‹œê°„ ìƒë‹´</div>
                                            <div className="text-xs text-gray-600">24ì‹œê°„ ì˜ˆì•½</div>
                                        </div>
                                        <div className="text-center p-4 bg-white rounded-lg shadow-sm">
                                            <div className="text-2xl mb-2">â­</div>
                                            <div className="font-semibold text-gray-800 text-sm">í‰ì  4.8+</div>
                                            <div className="text-xs text-gray-600">ë§Œì¡±ë„ 98%</div>
                                        </div>
                                    </div>

                                    <div className="space-y-2 mb-4">
                                        <div className="flex items-center text-sm text-amber-700">
                                            <span className="mr-2">âœ…</span>
                                            <span>ê°œì¸ë³„ ë§ì¶¤ ìƒë‹´ (30ë¶„ ~ 60ë¶„)</span>
                                        </div>
                                        <div className="flex items-center text-sm text-amber-700">
                                            <span className="mr-2">âœ…</span>
                                            <span>ê¶í•©, ì§ì—…ìš´, ê±´ê°•ìš´ ë“± ë¶„ì•¼ë³„ ì „ë¬¸ê°€</span>
                                        </div>
                                        <div className="flex items-center text-sm text-amber-700">
                                            <span className="mr-2">âœ…</span>
                                            <span>ìŒì„±/í™”ìƒ/ì±„íŒ… ìƒë‹´ ì„ íƒ ê°€ëŠ¥</span>
                                        </div>
                                    </div>

                                    <div className="flex space-x-3">
                                        <button className="flex-1 bg-gradient-to-r from-amber-500 to-orange-600 text-white py-3 rounded-lg font-semibold hover:from-amber-600 hover:to-orange-700 transition-all duration-200 text-sm">
                                            ì „ë¬¸ê°€ ìƒë‹´ ì‹ ì²­
                                        </button>
                                        <button className="px-4 bg-white border border-amber-300 text-amber-700 py-3 rounded-lg font-semibold hover:bg-amber-50 transition-all duration-200 text-sm">
                                            ìƒë‹´ë£Œ í™•ì¸
                                        </button>
                                    </div>

                                    <div className="text-center mt-3">
                                        <span className="text-xs text-amber-600">
                                            ğŸ’° ì²« ìƒë‹´ 50% í• ì¸ ì´ë²¤íŠ¸ ì§„í–‰ ì¤‘!
                                        </span>
                                    </div>
                                </div>

                                {/* ë²„íŠ¼ */}
                                <div className="flex space-x-3">
                                    <button
                                        onClick={handleShare}
                                        className="flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all duration-200"
                                    >
                                        ê³µìœ í•˜ê¸°
                                    </button>
                                    <button
                                        onClick={onRestart}
                                        className="flex-1 bg-gradient-to-r from-gray-500 to-gray-600 text-white py-3 rounded-lg font-semibold hover:from-gray-600 hover:to-gray-700 transition-all duration-200"
                                    >
                                        ë‹¤ì‹œí•˜ê¸°
                                    </button>
                                </div>
                            </div>
                        </div>

                        {/* ë©´ì±… ì¡°í•­ */}
                        <div className="text-center mt-6 text-white text-sm opacity-80">
                            <p>* ë³¸ ì„œë¹„ìŠ¤ëŠ” ì¬ë¯¸ì™€ ì°¸ê³ ìš©ìœ¼ë¡œ ì œê³µë˜ë©°, ê³¼í•™ì  ê·¼ê±°ëŠ” ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<SajuApp />, document.getElementById('root'));
    </script>
</body>
</html>